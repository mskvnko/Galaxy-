<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Coraz√≥n C√≥smico Ultra Vivo</title>
<style>
  body { margin:0; overflow:hidden; background:black; }
  canvas { display:block; }
</style>
</head>
<body>
<script src="https://cdn.jsdelivr.net/npm/three@0.155.0/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.155.0/examples/js/controls/OrbitControls.js"></script>

<script>
// --- Escena y c√°mara ---
const scene = new THREE.Scene();
const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
camera.position.z = 80;

const renderer = new THREE.WebGLRenderer({antialias:true});
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

// --- Luz ---
const ambientLight = new THREE.AmbientLight(0xffffff, 0.7);
scene.add(ambientLight);
const pointLight = new THREE.PointLight(0xff69b4, 1.5, 300);
pointLight.position.set(50,50,50);
scene.add(pointLight);

// --- Controles ---
const controls = new THREE.OrbitControls(camera, renderer.domElement);
controls.enableDamping = true;
controls.dampingFactor = 0.05;
controls.enablePan = false;
controls.minDistance = 20;
controls.maxDistance = 150;

// --- Coraz√≥n 3D ---
const heartShape = new THREE.Shape();
heartShape.moveTo(0,0);
heartShape.bezierCurveTo(0, 5, -5, 5, -5, 0);
heartShape.bezierCurveTo(-5, -5, 0, -5, 0, -10);
heartShape.bezierCurveTo(0, -5, 5, -5, 5, 0);
heartShape.bezierCurveTo(5, 5, 0, 5, 0, 0);

const extrudeSettings = { depth: 5, bevelEnabled: true, bevelSegments: 2, steps: 2, bevelSize: 1, bevelThickness: 1 };
const heartGeometry = new THREE.ExtrudeGeometry(heartShape, extrudeSettings);
const heartMaterial = new THREE.MeshPhongMaterial({ color: 0xFF69B4, shininess: 300, emissive: 0xff69b4, emissiveIntensity:0.2 });
const heartMesh = new THREE.Mesh(heartGeometry, heartMaterial);
scene.add(heartMesh);

// --- Palpitar interactivo ---
let scaleDir = 1;
function pulseHeart() {
    // Palpitar normal
    let distance = camera.position.distanceTo(heartMesh.position);
    let intensity = THREE.MathUtils.clamp(5/distance,0.01,0.05); // m√°s cerca = m√°s fuerte
    heartMesh.scale.x += intensity*scaleDir;
    heartMesh.scale.y += intensity*scaleDir;
    if(heartMesh.scale.x > 1.25 || heartMesh.scale.x < 0.75) scaleDir *= -1;
}

// --- Polvo c√≥smico y destellos ---
const starCount = 500;
let stars = [];
for(let i=0;i<starCount;i++){
    const geometry = new THREE.SphereGeometry(Math.random()*0.3+0.1,4,4);
    const material = new THREE.MeshBasicMaterial({ color: 0xffffff, transparent:true, opacity: Math.random() });
    const star = new THREE.Mesh(geometry, material);
    star.position.set((Math.random()-0.5)*300, (Math.random()-0.5)*300, (Math.random()-0.5)*300);
    stars.push(star);
    scene.add(star);
}

// --- Frases como sprites ---
const frases = [
"Me enloqueces.","No puedo con lo mucho que me encantas.","Me fascinas demasiado.","Me vuelves loca.",
"Me haces sonre√≠r sin tocarme.","Me tienes atrapada en tu cabeza.","Me haces pensar cosas tontas‚Ä¶ de las buenas.",
"Me derrites desde lejos.","Me vuelves sonrisas locas.","No dejo de pensar en ti.",
"Me encantas demasiado.","Me haces suspirar.","Me tienes obsesionada‚Ä¶ y feliz.","Me fascina todo de ti.","Me vuelves mariposas.",
"No puedo dejar de sonre√≠r por ti.","Me haces pensar en ti todo el d√≠a.","Me derrites con solo existir.",
"Me vuelves loca de manera linda.","Me encantas incluso por mensaje.","Me fascinas cada d√≠a m√°s.","Me haces sentir cosas raras‚Ä¶ y buenas.",
"Me vuelves tonta de amor.","No puedo dejar de imaginarte.","Me encantas tal cual eres.","Me haces sonre√≠r como tonta.",
"Me fascinas con tu locura.","Me vuelves adicta a ti.","Me derrites cada vez que hablas.","Me encantas m√°s de lo que deber√≠a.",
"Me tienes loca‚Ä¶ pero me gusta.","Me fascinas sin esfuerzo.","Me haces pensar en cosas lindas.","Me vuelves loca cada vez que me mandas mensaje.",
"Me encantas incluso cuando no est√°s aqu√≠.","Me derrites de solo pensarte.","Me fascinas con tu manera de ser.",
"Me vuelves un desastre feliz.","Me encantas demasiado para ignorarlo.","Me haces sonre√≠r como tonta loca.",
"Me fascinas y no puedo evitarlo.","Me vuelves loca de pensar en ti.","Me encantas m√°s cada d√≠a.","Me derrites sin darte cuenta.",
"Me fascinas con cada palabra que dices.","Me haces perder la cabeza.","Me vuelves tonta de manera linda.",
"Me encantas y me obsesionas.","Me derrites incluso a distancia.","Me fascinas solo con existir.",
"Me vuelves loca, no s√© qu√© hacer.","Me encantas hasta por chat.","Me derrites con tu risa.",
"Me fascinas demasiado.","Me haces sentir cosquillas en el coraz√≥n.","Me vuelves loca cada vez que pienso en ti.",
"Me encantas y punto.","Me derrites con tu manera de ser.","Me fascinas demasiado, no s√© qu√© hacer.",
"Me haces suspirar como tonta.","Me vuelves loca‚Ä¶ y me encanta.","Me encantas hasta la m√©dula.",
"Me derrites de la cabeza a los pies.","Me fascinas como nadie m√°s.","Me haces sonre√≠r sin raz√≥n.","Me vuelves loca con tu sola existencia.",
"Me encantas cada segundo.","Me derrites aunque est√©s lejos.","Me fascinas y me vuelves loca.",
"Me haces pensar en cosas tontas‚Ä¶ pero lindas.","Me vuelves loca de manera dulce.","Me encantas y no puedo ocultarlo.",
"Me derrites con tus palabras.","Me fascinas desde lejos.","Me haces sonre√≠r como tonta loca.",
"Me vuelves loca de pensar en ti todo el tiempo.","Me encantas m√°s de lo que imaginas.",
"Me derrites sin hacer nada.","Me fascinas y no me importa.","Me haces perder la cabeza cada d√≠a.",
"Me vuelves loca con tu simple existencia.","Me encantas demasiado.","Me derrites de la cabeza a los pies.",
"Me fascinas cada vez m√°s.","Me haces sonre√≠r como una tonta feliz.","Me vuelves loca solo con tu nombre.",
"Me encantas aunque no est√©s cerca.","Me derrites sin moverte de tu lugar.","Me fascinas y me enloquece.",
"Me haces pensar en ti todo el tiempo.","Me vuelves loca con tu manera de ser.","Me encantas m√°s de lo que puedo soportar.",
"Me derrites cada vez que te imagino.","Me fascinas y me enloquezco.","Me haces sonre√≠r como nunca.",
"Me vuelves loca a distancia.","Me encantas con todo tu ser.","Me derrites aunque solo te vea en pantalla.",
"Me fascinas de manera loca.","Me haces perder el control‚Ä¶ pero me encanta.üíñ"
];

let textSprites = [];

function makeTextSprite(message, color="#fff", fontsize=24) {
    const canvas = document.createElement('canvas');
    const context = canvas.getContext('2d');
    context.font = `${fontsize}px Arial`;
    context.fillStyle = color;
    context.fillText(message, 0, fontsize);
    const texture = new THREE.CanvasTexture(canvas);
    texture.needsUpdate = true;
    const spriteMaterial = new THREE.SpriteMaterial({ map: texture });
    const sprite = new THREE.Sprite(spriteMaterial);
    sprite.scale.set(message.length/2, fontsize/5, 1);
    return sprite;
}

// Crear sprites
frases.forEach((frase)=>{
    const sprite = makeTextSprite(frase, "#fff", Math.random()*20+10);
    const radius = Math.random()*50 + 40;
    const theta = Math.random()*Math.PI*2;
    const phi = Math.random()*Math.PI;
    sprite.position.set(
        radius*Math.sin(phi)*Math.cos(theta),
        radius*Math.sin(phi)*Math.sin(theta),
        radius*Math.cos(phi)
    );
    scene.add(sprite);
    textSprites.push(sprite);
});

// --- Interacci√≥n proximidad ---
function interactText() {
    textSprites.forEach(sprite=>{
        const distance = camera.position.distanceTo(sprite.position);
        const scale = THREE.MathUtils.clamp(15/distance,1,5);
        sprite.scale.set(scale, scale, scale);
        sprite.lookAt(camera.position);
    });
}

// --- Animaci√≥n ---
function animate(){
    requestAnimationFrame(animate);
    pulseHeart();
    heartMesh.rotation.y += 0.007;

    // Brillo extra seg√∫n cercan√≠a
    let dist = camera.position.distanceTo(heartMesh.position);
    heartMaterial.emissiveIntensity = THREE.MathUtils.clamp(2/dist,0.2,1);

    interactText();

    // Parpadeo estrellas
    stars.forEach(star=>{
        star.material.opacity += (Math.random()-0.5)*0.05;
        star.material.opacity = THREE.MathUtils.clamp(star.material.opacity,0.1,1);
    });

    controls.update();
    renderer.render(scene,camera);
}
animate();

// --- Ajuste ventana ---
window.addEventListener('resize', ()=>{
    camera.aspect = window.innerWidth/window.innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(window.innerWidth, window.innerHeight);
});
</script>
</body>
</html>
